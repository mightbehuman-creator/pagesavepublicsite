(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{116:function(e,n,t){},122:function(e,n,t){},142:function(e,n,t){e.exports={container:"SubmissionBar_container__20zvx",inputbar:"SubmissionBar_inputbar__eWceA"}},150:function(e,n,t){"use strict";t.r(n);var a=t(1),r=t.n(a),c=t(19),o=t.n(c),i=(t(116),t(30)),s=t(25),l=t(206),u=(t(122),t(23)),d=t(20),b=t(152),p=t(198),g=t(29),j=t.n(g),f=t(55),m=t(33),h=t(70),x=t.n(h),O="https://pagesave.herokuapp.com";function v(){var e="";return e=O+"/pagesave",new Promise((function(n,t){x.a.get(e,{}).then((function(e){console.log(e),n(e)})).catch((function(e){console.log(e),t(e)}))}))}var y=Object(m.b)("archive/fetchArchives",Object(f.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))),k=Object(m.c)({name:"archive",initialState:{archives:[],status:"loading"},reducers:{},extraReducers:function(e){e.addCase(y.pending,(function(e){})).addCase(y.fulfilled,(function(e,n){e.status="idle",e.archives=n.payload}))}}),w=function(e){return e.archive.archives},N=function(e){return e.archive.status},I=k.reducer,C=t(195),S=t(199),T=t(209),B=t(200),P=t(6),R=Object(C.a)((function(e){return{centering:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:e.spacing(4)},archivecontainer:{marginTop:e.spacing(8)},firstArchive:{marginTop:e.spacing(4)},gridcontainer:{backgroundColor:e.palette.background.paper,display:"grid",gridTemplateColumns:"2fr 3fr 4fr",maxWidth:"100%",marginTop:e.spacing(3)},imgofpage:{width:"max-content",overflowY:"hidden",height:"100%",maxHeight:"100%",maxWidth:"100%",verticalAlign:"top",objectFit:"cover",objectPosition:"0% 0%"},archiveTitle:{fontFamily:"'Train One', cursive"},paper:{height:"100%"},fillheight:{height:"200px"}}}));function U(e){console.log("props withing single archive"),console.log(e);var n=R();return Object(P.jsxs)("div",{className:0==e.idx?n.firstArchive:n.archivecontainer,children:[Object(P.jsx)(b.a,{variant:"h5",gutterBottom:!0,children:e.title}),Object(P.jsxs)("div",{className:n.gridcontainer,children:[Object(P.jsx)(p.a,{className:n.fillheight,children:Object(P.jsx)(S.a,{elevation:3,className:n.paper,children:Object(P.jsx)("a",{href:e.img0B,target:"_blank",rel:"noopener noreferrer nofollow",children:Object(P.jsx)("img",{className:n.imgofpage,src:e.img0})})})}),Object(P.jsx)(p.a,{className:n.fillheight,children:Object(P.jsx)(S.a,{elevation:3,className:n.paper,children:Object(P.jsx)("a",{href:e.img1B,target:"_blank",rel:"noopener noreferrer nofollow",children:Object(P.jsx)("img",{className:n.imgofpage,src:e.img1})})})}),Object(P.jsx)(p.a,{className:n.fillheight,children:Object(P.jsx)(S.a,{elevation:3,className:n.paper,children:Object(P.jsx)("a",{href:e.img2B,target:"_blank",rel:"noopener noreferrer nofollow",children:Object(P.jsx)("img",{className:n.imgofpage,src:e.img2})})})})]}),Object(P.jsxs)(p.a,{style:{paddingTop:"16px",display:"flex",justifyContent:"space-between"},children:[Object(P.jsx)(B.a,{href:e.url,target:"_blank",rel:"noopener noreferrer nofollow",children:"Visit Link"}),Object(P.jsx)(B.a,{href:"#",children:"Set revision alert"})]})]})}function A(){var e=Object(s.b)(),n=Object(s.c)(w),t=Object(s.c)(N);console.log("reverse");var r=Object(d.a)(n).reverse(),c=Object(a.useState)(1),o=Object(u.a)(c,2),l=o[0],g=o[1],j=R();return Object(a.useEffect)((function(){console.log("running archive mounting stuff"),e(y())}),[]),"loading"!==t&&Object(P.jsxs)(p.a,{maxWidth:"md",children:[Object(P.jsx)(b.a,{variant:"h3",className:j.archiveTitle,gutterBottom:!0,children:"ARCHIVES"}),r.filter((function(e,n){return n>=5*(l-1)&&n<5*l})).map((function(e,n){return Object(P.jsx)(U,Object(i.a)({idx:n},e),e.id)})),Object(P.jsx)("div",{className:j.centering,children:Object(P.jsx)(T.a,{page:l,onChange:function(e,n){console.log(n),g(n)},count:Math.ceil(r.length/5),color:"secondary"})})]})}var D=t(13),E=t(202),_=t(97),z=t.n(_),M=t(207);t(142);function W(e){var n="";return n=O+"/pagesave",new Promise((function(t,a){x.a.post(n,{url:e}).then((function(e){console.log(e),t(e)})).catch((function(e){console.log(e),a(e)}))}))}var L=Object(m.b)("submissionbar/submitURL",function(){var e=Object(f.a)(j.a.mark((function e(n){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("trying to submit async ".concat(n)),e.next=3,W(n);case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),H=function(e){return e.submissionbar.snackbarOpen},F=function(e){return e.submissionbar.snackbarMsg},q=function(e){return e.submissionbar.snackbarType},Q=Object(m.c)({name:"submissionbar",initialState:{status:"idle",snackbarOpen:!1,snackbarMsg:"",snackbarType:"error"},reducers:{closeSB:function(e){e.snackbarOpen=!1},showInvalidURLMsg:function(e){e.snackbarOpen=!0,e.snackbarMsg="Url is invalid",e.snackbarType="error"}},extraReducers:function(e){e.addCase(L.pending,(function(e){e.status="submitting"})).addCase(L.fulfilled,(function(e,n){e.status="idle",e.snackbarOpen=!0,e.snackbarMsg="Url submitted",e.snackbarType="success"}))}}),V=Q.actions,X=V.closeSB,G=V.showInvalidURLMsg,$=Q.reducer,J=t(96),K=t.n(J),Y=Object(C.a)((function(e){return{container:{marginTop:e.spacing(8)},savebutton:Object(D.a)({minWidth:"150px",alignSelf:"flex-end",height:"56px"},e.breakpoints.up("md"),{flexDirection:"row",minwidth:"0px",marginLeft:"32px"}),input:{width:"80%"},root:Object(D.a)({margin:"auto",display:"flex",justifyContent:"center",alignItems:"center","& > *":{margin:e.spacing(2)},flexDirection:"column"},e.breakpoints.up("sm"),{flexDirection:"row",maxWidth:"500px"})}}));function Z(){var e=Object(s.b)(),n=r.a.createRef(),t=function(t){t.preventDefault();var a=n.current.value;console.log(a),K.a.isUri(a)?(console.log("Looks like an URI"),e(L(a)),n.current.value=""):(console.log("Not a URI"),e(G()))},a=Y();return Object(P.jsx)("div",{className:a.container,children:Object(P.jsxs)("form",{className:a.root,onSubmit:t,noValidate:!0,autoComplete:"off",children:[Object(P.jsx)(M.a,{inputRef:n,className:a.input,label:"Enter url of page to save"}),Object(P.jsx)(E.a,{className:a.savebutton,startIcon:Object(P.jsx)(z.a,{}),variant:"contained",color:"primary",onClick:t,children:"Save"})]})})}var ee=t(79);ee.a.initializeApp({apiKey:"AIzaSyCTKDCCVasMozc94FO9WexvvBkvHaXrn-w",authDomain:"page-save.firebaseapp.com",databaseURL:"https://page-save-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"page-save",storageBucket:"page-save.appspot.com",messagingSenderId:"191537973535",appId:"1:191537973535:web:e9521da8ba973166a8082a",measurementId:"G-HX28BXHXWD"});var ne=ee.a.database(),te=Object(C.a)({title:{fontFamily:"'Train One', cursive"},heroBackground:Object(D.a)({width:"100%",margin:0,textAlign:"center",height:"500px",paddingTop:"120px",boxSizing:"border-box"},"height","100vh"),greenIndicator:{background:"#28B62C",display:"inline-block",width:"1em",height:"1em",borderRadius:"50%",animation:"$pulse 2s infinite linear"},redIndicator:{background:"red",display:"inline-block",width:"1em",height:"1em",borderRadius:"50%"},"@keyframes pulse":{"0%":{transform:"scale(1)"},"25%":{transform:"scale(1)"},"50%":{transform:"scale(1.2)"},"75%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}});function ae(){var e=te(),n=Object(a.useState)("offline"),t=Object(u.a)(n,2),r=t[0],c=t[1];return Object(a.useEffect)((function(){ne.ref("status").on("value",(function(e){console.log("status: "+e.val()),c(e.val())}),(function(e){console.log("The read failed: "+e.name)}))}),[]),Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",margin:"16px"},children:["online"===r?Object(P.jsx)("span",{className:e.greenIndicator}):Object(P.jsx)("span",{className:e.redIndicator}),Object(P.jsx)(b.a,{className:e.title,style:{marginLeft:"8px"},variant:"subtitle2",gutterBottom:!0,children:r})]}),Object(P.jsxs)("div",{className:e.heroBackground,children:[Object(P.jsx)(b.a,{className:e.title,variant:"h2",gutterBottom:!0,children:"Page Saver"}),Object(P.jsx)("div",{}),Object(P.jsx)(Z,{})]})]})}var re=Object(C.a)((function(e){return{footercontainer:{minHeight:"100px",display:"flex",justifyContent:"center",alignItems:"center",background:e.palette.primary.dark,borderTop:"1px solid black"},footertext:{margin:"auto",textAlign:"center",color:e.palette.primary.contrastText},footerMarginTop:{marginTop:e.spacing(4)}}})),ce=function(){var e=re();return Object(P.jsx)("footer",{className:e.footerMarginTop,children:Object(P.jsx)("div",{className:e.footercontainer,children:Object(P.jsx)(b.a,{className:e.footertext,variant:"subtitle",children:"mightbehuman@protonmail.com"})})})},oe=Object(m.c)({name:"progressdialog",initialState:{urlsInProgress:{},showProgressDialog:!0},reducers:{closeDialog:function(e,n){e.showProgressDialog=!1},updateUrls:function(e,n){console.log("received update url actions"),console.log(n.payload);var t=Object(i.a)({},e);t.showProgressDialog=!0;for(var a=0,r=Object.entries(n.payload||{});a<r.length;a++){var c=Object(u.a)(r[a],2),o=c[0],s=c[1];console.log("Checking from action payload: "+s),"undefined"===typeof e.urlsInProgress[o]&&(console.log("added new:"+s),t.urlsInProgress=Object(i.a)(Object(i.a)({},t.urlsInProgress),{},Object(D.a)({},o,{link:s,status:"downloading"})))}for(var l=0,d=Object.entries(e.urlsInProgress);l<d.length;l++){var b=Object(u.a)(d[l],2),p=b[0],g=b[1],j=g.status,f=g.link;console.log("Checking from state: "+j+" "+f),n.payload&&"undefined"!==typeof n.payload[p]||(console.log("completed:"+f),t.urlsInProgress=Object(i.a)(Object(i.a)({},t.urlsInProgress),{},Object(D.a)({},p,Object(i.a)(Object(i.a)({},t.urlsInProgress[p]),{},{status:"completed"}))))}return t}}}),ie=oe.actions,se=ie.updateUrls,le=ie.closeDialog,ue=function(e){return e.progressdialog.urlsInProgress},de=function(e){return e.progressdialog.showProgressDialog},be=oe.reducer,pe=t(101),ge=t.n(pe),je=t(208),fe=t(102),me=t.n(fe),he=t(103),xe=t.n(he),Oe=t(99),ve=t.n(Oe);function ye(e,n){return e.length<n?e:e.substr(0,n)+"\u2026"}var ke=t(205),we=t(212),Ne=t(203),Ie=t(204),Ce=t(100),Se=t.n(Ce),Te=t(98),Be=t(36),Pe=t(153),Re=Object(C.a)((function(e){return{root:{maxWidth:"90vw",position:"fixed",bottom:"0px",right:"0px",margin:"16px"},header:{display:"flex",background:"white",borderRadius:"10px 10px 0px 0px",alignItems:"center"},headericon:{},checkmark:{marginLeft:"auto"},urlcontainer:{display:"flex",padding:e.spacing(1)+"px "+e.spacing(3)+"px",width:"inherit",alignItems:"center"},urlcontainercompleted:{display:"flex",padding:e.spacing(1)+"px "+e.spacing(3)+"px",color:e.palette.primary.dark,alignItems:"center"},overrideaccordionshadowandmargin:{boxShadow:"none",border:"none",margin:"0","&$expanded":{margin:"0"}},expanded:{},urls:{marginLeft:e.spacing(2),wordBreak:"break-word",whiteSpace:"normal"},processingQueue:Object(D.a)({},e.breakpoints.down("sm"),{fontSize:e.typography.body1.fontSize})}}));function Ue(e){var n=Object(s.c)(ue),t=Object(s.c)(de),c=Object(s.b)(),o=Re();e.anchorEl;Object(a.useEffect)((function(){ne.ref("queue/").on("value",(function(e){var n=e.val();console.log("queue changes"),console.log(n),c({type:"QUEUE_CHANGE",payload:n})}))}),[]);var i=r.a.useState(!1),l=Object(u.a)(i,2),d=l[0],g=l[1],j=Object(Be.a)();return console.log("existingurls"),window.exu=n,console.log(n),Object.values(n).length>0&&t&&Object(P.jsxs)(je.a,{borderRadius:"40px",boxShadow:3,m:0,pl:2,pb:5,style:{paddingRight:"64px"},bgcolor:"background.paper",className:o.root,children:[Object(P.jsx)(Pe.a,{style:{position:"absolute",right:"16px",top:"16px"},"aria-label":"close",onClick:function(){return c(le())},color:"primary",children:Object(P.jsx)(ve.a,{})}),Object(P.jsxs)(we.a,{expanded:!d,onChange:function(){g(!d)},classes:{root:o.overrideaccordionshadowandmargin,expanded:o.expanded},children:[Object(P.jsx)(Ne.a,{expandIcon:Object(P.jsx)(Se.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",p:0,m:0,children:Object(P.jsxs)("div",{className:o.header,children:[Object(P.jsx)(ge.a,{style:{margin:"8px"},color:"primary",fontSize:"large"}),Object(P.jsxs)("div",{children:[Object(P.jsx)(b.a,{variant:"h5",gutterBottom:!1,className:o.processingQueue,children:"Processing queue"}),Object(P.jsxs)(b.a,{variant:"caption",children:[Object.values(n).filter((function(e){return"downloading"===e.status})).length," page saving in progress"]})]})]})}),Object(P.jsx)(Ie.a,{style:{margin:0,padding:0},children:Object(P.jsx)("div",{className:o.body,children:Object.entries(n).map((function(e){var n=Object(u.a)(e,2),t=n[0],a=n[1];return"downloading"===a.status?Object(P.jsxs)("div",{children:[Object(P.jsxs)("div",{className:o.urlcontainer,children:[Object(P.jsx)(me.a,{fontSize:"large",color:"disabled"}),Object(P.jsxs)(b.a,{className:o.urls,children:["Saving ",ye(a.link,30)]})]}),Object(P.jsx)(p.a,{children:Object(P.jsx)(ke.a,{color:"primary"})})]},t):Object(P.jsxs)("div",{className:o.urlcontainercompleted,children:[Object(P.jsx)(xe.a,{fontSize:"large"}),Object(P.jsx)(b.a,{className:o.urls,children:ye(a.link,30)}),Object(P.jsx)("div",{className:o.checkmark,children:Object(P.jsx)(Te.Checkmark,{size:"medium",color:j.palette.primary.main})})]},t)}))})})]})]})}var Ae=t(211),De=t(210);function Ee(e){return Object(P.jsx)(De.a,Object(i.a)({elevation:6,variant:"filled"},e))}var _e=function(){var e=Object(s.c)(H),n=Object(s.c)(F),t=Object(s.c)(q),a=Object(s.b)(),r=function(e,n){"clickaway"!==n&&(console.log("trying to close"),a(X()))};return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(l.a,{}),Object(P.jsx)(ae,{}),Object(P.jsx)(A,{}),Object(P.jsx)(Ae.a,{open:e,autoHideDuration:1200,onClose:r,children:Object(P.jsx)(Ee,{onClose:r,severity:t,children:n})}),Object(P.jsx)(Ue,{}),Object(P.jsx)(ce,{})]})};function ze(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(n){return setTimeout((function(){return n({data:e})}),500)}))}var Me=Object(m.b)("counter/fetchCount",function(){var e=Object(f.a)(j.a.mark((function e(n){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ze(n);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),We=Object(m.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,n){e.value+=n.payload}},extraReducers:function(e){e.addCase(Me.pending,(function(e){e.status="loading"})).addCase(Me.fulfilled,(function(e,n){e.status="idle",e.value+=n.payload}))}}),Le=We.actions,He=(Le.increment,Le.decrement,Le.incrementByAmount,We.reducer),Fe=t(104),qe=t(59),Qe=j.a.mark(Ge),Ve=j.a.mark($e),Xe=j.a.mark(Je);function Ge(e){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(qe.c)();case 2:return n=t.sent,console.log("queue changes async curState"),console.log(n),console.log("action:"),console.log(e),t.next=9,Object(qe.b)(se(e.payload));case 9:return t.next=11,Object(qe.b)(y());case 11:case"end":return t.stop()}}),Qe)}function $e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(qe.d)("QUEUE_CHANGE",Ge);case 2:case"end":return e.stop()}}),Ve)}function Je(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(qe.a)([$e()]);case 2:case"end":return e.stop()}}),Xe)}var Ke=Object(Fe.a)(),Ye=Object(m.a)({reducer:{counter:He,submissionbar:$,archive:I,progressdialog:be},middleware:function(e){return[].concat(Object(d.a)(e()),[Ke])}});Ke.run(Je);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(P.jsx)(r.a.StrictMode,{children:Object(P.jsx)(s.a,{store:Ye,children:Object(P.jsx)(_e,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[150,1,2]]]);
//# sourceMappingURL=main.d507832f.chunk.js.map