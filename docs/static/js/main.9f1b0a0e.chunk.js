(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{139:function(e,t,n){},145:function(e,t,n){},165:function(e,t,n){e.exports={container:"SubmissionBar_container__20zvx",inputbar:"SubmissionBar_inputbar__eWceA"}},173:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(20),c=n.n(i),o=(n(139),n(33)),s=n(30),l=n(237),d=(n(145),n(15)),u=n(19),p=n(95),b=n(224),g=n(23),j=n.n(g),f=n(44),m=n(43),h=n(83),x=n.n(h),O="https://pagesave.herokuapp.com";function v(){var e="";return e=O+"/pagesave",new Promise((function(t,n){x.a.get(e,{}).then((function(e){console.log(e),t(e)})).catch((function(e){console.log(e),n(e)}))}))}var y=Object(m.b)("archive/fetchArchives",Object(f.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),w=Object(m.c)({name:"archive",initialState:{archives:[],status:"loading"},reducers:{},extraReducers:function(e){e.addCase(y.pending,(function(e){})).addCase(y.fulfilled,(function(e,t){e.status="idle",e.archives=t.payload}))}}),k=function(e){return e.archive.archives},N=function(e){return e.archive.status},S=w.reducer,I=n(221),C=n(225),T=n(240),B=n(226),P=n(8),R=Object(I.a)((function(e){return{centering:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:e.spacing(4)},archivecontainer:{marginTop:e.spacing(8)},firstArchive:{marginTop:e.spacing(4)},gridcontainer:{backgroundColor:e.palette.background.paper,display:"grid",gridTemplateColumns:"2fr 3fr 4fr",maxWidth:"100%",marginTop:e.spacing(3)},imgofpage:{width:"max-content",overflowY:"hidden",height:"100%",maxHeight:"100%",maxWidth:"100%",verticalAlign:"top",objectFit:"cover",objectPosition:"0% 0%"},archiveTitle:{fontFamily:"'Train One', cursive"},paper:{height:"100%"},fillheight:{height:"200px"}}}));function E(e){console.log("props withing single archive"),console.log(e);var t=R();return Object(P.jsxs)("div",{className:0==e.idx?t.firstArchive:t.archivecontainer,children:[Object(P.jsx)(p.a,{variant:"h5",gutterBottom:!0,children:e.title}),Object(P.jsxs)("div",{className:t.gridcontainer,children:[Object(P.jsx)(b.a,{className:t.fillheight,children:Object(P.jsx)(C.a,{elevation:3,className:t.paper,children:Object(P.jsx)("a",{href:e.img0B,target:"_blank",rel:"noopener noreferrer nofollow",children:Object(P.jsx)("img",{className:t.imgofpage,src:e.img0})})})}),Object(P.jsx)(b.a,{className:t.fillheight,children:Object(P.jsx)(C.a,{elevation:3,className:t.paper,children:Object(P.jsx)("a",{href:e.img1B,target:"_blank",rel:"noopener noreferrer nofollow",children:Object(P.jsx)("img",{className:t.imgofpage,src:e.img1})})})}),Object(P.jsx)(b.a,{className:t.fillheight,children:Object(P.jsx)(C.a,{elevation:3,className:t.paper,children:Object(P.jsx)("a",{href:e.img2B,target:"_blank",rel:"noopener noreferrer nofollow",children:Object(P.jsx)("img",{className:t.imgofpage,src:e.img2})})})})]}),Object(P.jsxs)(b.a,{style:{paddingTop:"16px",display:"flex",justifyContent:"space-between"},children:[Object(P.jsx)(B.a,{href:e.url,target:"_blank",rel:"noopener noreferrer nofollow",children:"Visit Link"}),Object(P.jsx)(B.a,{href:"#",children:"Set revision alert"})]})]})}function U(){var e=Object(s.b)(),t=Object(s.c)(k),n=Object(s.c)(N);console.log("reverse");var r=Object(u.a)(t).reverse(),i=Object(a.useState)(1),c=Object(d.a)(i,2),l=c[0],g=c[1],j=R();return Object(a.useEffect)((function(){console.log("running archive mounting stuff"),e(y())}),[]),"loading"!==n&&Object(P.jsxs)(b.a,{maxWidth:"md",children:[Object(P.jsx)(p.a,{variant:"h3",className:j.archiveTitle,gutterBottom:!0,children:"ARCHIVES"}),r.filter((function(e,t){return t>=5*(l-1)&&t<5*l})).map((function(e,t){return Object(P.jsx)(E,Object(o.a)({idx:t},e),e.id)})),Object(P.jsx)("div",{className:j.centering,children:Object(P.jsx)(T.a,{page:l,onChange:function(e,t){console.log(t),g(t)},count:Math.ceil(r.length/5),color:"secondary"})})]})}var A=n(14),D=n(228),z=n(115),M=n.n(z),_=n(238);n(165);function L(e){var t="";return t=O+"/pagesave",new Promise((function(n,a){x.a.post(t,{url:e}).then((function(e){console.log(e),n(e)})).catch((function(e){console.log(e),a(e)}))}))}var W=Object(m.b)("submissionbar/submitURL",function(){var e=Object(f.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("trying to submit async ".concat(t)),e.next=3,L(t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),H=function(e){return e.submissionbar.snackbarOpen},F=function(e){return e.submissionbar.snackbarMsg},Q=function(e){return e.submissionbar.snackbarType},V=Object(m.c)({name:"submissionbar",initialState:{status:"idle",snackbarOpen:!1,snackbarMsg:"",snackbarType:"error"},reducers:{closeSB:function(e){e.snackbarOpen=!1},showInvalidURLMsg:function(e){e.snackbarOpen=!0,e.snackbarMsg="Url is invalid",e.snackbarType="error"}},extraReducers:function(e){e.addCase(W.pending,(function(e){e.status="submitting"})).addCase(W.fulfilled,(function(e,t){e.status="idle",e.snackbarOpen=!0,e.snackbarMsg="Url submitted",e.snackbarType="success"}))}}),X=V.actions,$=X.closeSB,q=X.showInvalidURLMsg,G=V.reducer,J=n(114),K=n.n(J),Z=Object(I.a)((function(e){return{container:{marginTop:e.spacing(8)},savebutton:Object(A.a)({minWidth:"150px",alignSelf:"flex-end",height:"56px"},e.breakpoints.up("md"),{flexDirection:"row",minwidth:"0px",marginLeft:"32px"}),input:{width:"80%"},root:Object(A.a)({margin:"auto",display:"flex",justifyContent:"center",alignItems:"center","& > *":{margin:e.spacing(2)},flexDirection:"column"},e.breakpoints.up("sm"),{flexDirection:"row",maxWidth:"500px"})}}));function Y(){var e=Object(s.b)(),t=r.a.createRef(),n=function(n){n.preventDefault();var a=t.current.value;console.log(a),K.a.isUri(a)?(console.log("Looks like an URI"),e(W(a)),t.current.value=""):(console.log("Not a URI"),e(q()))},a=Z();return Object(P.jsx)("div",{className:a.container,children:Object(P.jsxs)("form",{className:a.root,onSubmit:n,noValidate:!0,autoComplete:"off",children:[Object(P.jsx)(_.a,{inputRef:t,className:a.input,label:"Enter url of page to save"}),Object(P.jsx)(D.a,{className:a.savebutton,startIcon:Object(P.jsx)(M.a,{}),variant:"contained",color:"primary",onClick:n,children:"Save"})]})})}var ee=n(93);ee.a.initializeApp({apiKey:"AIzaSyCTKDCCVasMozc94FO9WexvvBkvHaXrn-w",authDomain:"page-save.firebaseapp.com",databaseURL:"https://page-save-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"page-save",storageBucket:"page-save.appspot.com",messagingSenderId:"191537973535",appId:"1:191537973535:web:e9521da8ba973166a8082a",measurementId:"G-HX28BXHXWD"});var te=ee.a.database(),ne=n.p+"static/media/disk.4e864010.svg",ae=n(68),re=n(229),ie=n(244),ce=n(231),oe=n(232),se=n(230),le=n(233),de=r.a.forwardRef((function(e,t){return Object(P.jsx)(re.a,Object(o.a)({direction:"up",ref:t},e))})),ue=Object(I.a)({title:{fontFamily:"'Train One', cursive"},heroBackground:Object(A.a)({width:"100%",margin:0,textAlign:"center",height:"500px",paddingTop:"120px",boxSizing:"border-box"},"height","100vh"),greenIndicator:{background:"#28B62C",display:"inline-block",width:"1em",height:"1em",borderRadius:"50%",animation:"$pulse 2s infinite linear"},redIndicator:{background:"red",display:"inline-block",width:"1em",height:"1em",borderRadius:"50%"},"@keyframes pulse":{"0%":{transform:"scale(1)"},"25%":{transform:"scale(1)"},"50%":{transform:"scale(1.2)"},"75%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}});function pe(){var e=ue(),t=Object(a.useState)("offline"),n=Object(d.a)(t,2),r=n[0],i=n[1],c=Object(ae.useSpring)({loop:!0,to:[{opacity:1,color:"#ffaaee"},{opacity:0,color:"rgb(14,26,19)"}],from:{opacity:0,color:"red"},config:{duration:3e3}});return Object(a.useEffect)((function(){te.ref("status").on("value",(function(e){console.log("status: "+e.val()),i(e.val())}),(function(e){console.log("The read failed: "+e.name)}))}),[]),Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",margin:"16px"},children:["online"===r?Object(P.jsx)("span",{className:e.greenIndicator}):Object(P.jsx)("span",{className:e.redIndicator}),Object(P.jsx)(p.a,{className:e.title,style:{marginLeft:"8px"},variant:"subtitle2",gutterBottom:!0,children:r})]}),Object(P.jsxs)("div",{className:e.heroBackground,children:[Object(P.jsxs)("div",{style:{position:"relative"},children:[Object(P.jsx)(ae.animated.div,{style:c,children:Object(P.jsx)("img",{src:ne,style:{position:"absolute",right:"50vw",width:"32px",height:"32px",transform:"rotate(45deg)"}})}),Object(P.jsx)(p.a,{className:e.title,variant:"h2",gutterBottom:!0,children:"Page Saver"})]}),Object(P.jsx)(Y,{})]}),Object(P.jsxs)(ie.a,{open:"offline"===r,TransitionComponent:de,keepMounted:!0,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description",children:[Object(P.jsx)(se.a,{id:"alert-dialog-slide-title",children:"Server is currently offline"}),Object(P.jsx)(ce.a,{children:Object(P.jsxs)(oe.a,{id:"alert-dialog-slide-description",children:["The server is currently offline.",Object(P.jsx)("br",{}),"Starting up the server from a coldboot. Please wait...",Object(P.jsx)(le.a,{color:"secondary"})]})})]})]})}var be=Object(I.a)((function(e){return{footercontainer:{minHeight:"100px",display:"flex",justifyContent:"center",alignItems:"center",background:e.palette.primary.dark,borderTop:"1px solid black"},footertext:{margin:"auto",textAlign:"center",color:e.palette.primary.contrastText},footerMarginTop:{marginTop:e.spacing(4)}}})),ge=function(){var e=be();return Object(P.jsx)("footer",{className:e.footerMarginTop,children:Object(P.jsx)("div",{className:e.footercontainer,children:Object(P.jsx)(p.a,{className:e.footertext,variant:"subtitle",children:"mightbehuman@protonmail.com"})})})},je=Object(m.c)({name:"progressdialog",initialState:{urlsInProgress:{},showProgressDialog:!0},reducers:{closeDialog:function(e,t){e.showProgressDialog=!1},updateUrls:function(e,t){console.log("received update url actions"),console.log(t.payload);var n=Object(o.a)({},e);n.showProgressDialog=!0;for(var a=0,r=Object.entries(t.payload||{});a<r.length;a++){var i=Object(d.a)(r[a],2),c=i[0],s=i[1];console.log("Checking from action payload: "+s),"undefined"===typeof e.urlsInProgress[c]&&(console.log("added new:"+s),n.urlsInProgress=Object(o.a)(Object(o.a)({},n.urlsInProgress),{},Object(A.a)({},c,{link:s,status:"downloading"})))}for(var l=0,u=Object.entries(e.urlsInProgress);l<u.length;l++){var p=Object(d.a)(u[l],2),b=p[0],g=p[1],j=g.status,f=g.link;console.log("Checking from state: "+j+" "+f),t.payload&&"undefined"!==typeof t.payload[b]||(console.log("completed:"+f),n.urlsInProgress=Object(o.a)(Object(o.a)({},n.urlsInProgress),{},Object(A.a)({},b,Object(o.a)(Object(o.a)({},n.urlsInProgress[b]),{},{status:"completed"}))))}return n}}}),fe=je.actions,me=fe.updateUrls,he=fe.closeDialog,xe=function(e){return e.progressdialog.urlsInProgress},Oe=function(e){return e.progressdialog.showProgressDialog},ve=je.reducer,ye=n(118),we=n.n(ye),ke=n(239),Ne=n(120),Se=n.n(Ne),Ie=n(121),Ce=n.n(Ie),Te=n(119),Be=n.n(Te);function Pe(e,t){return e.length<t?e:e.substr(0,t)+"\u2026"}var Re=n(236),Ee=n(245),Ue=n(234),Ae=n(235),De=n(117),ze=n.n(De),Me=n(116),_e=n(38),Le=n(175),We=Object(I.a)((function(e){return{root:{maxWidth:"90vw",position:"fixed",bottom:"0px",right:"0px",margin:"16px",paddingBottom:"0px"},header:{display:"flex",background:"white",borderRadius:"10px 10px 0px 0px",alignItems:"center"},headericon:{},acsummary:{padding:"0px"},acsummarycontent:{padding:"0px",margin:"0px","&$expanded":{margin:"0px",padding:"0px"}},lastchild:{"&:last-child":{paddingBottom:"8px"}},checkmark:{marginLeft:"auto"},urlcontainer:{display:"flex",padding:e.spacing(1)+"px "+e.spacing(1)+"px",width:"inherit",alignItems:"center"},urlcontainercompleted:{display:"flex",padding:e.spacing(1)+"px "+e.spacing(3)+"px",color:e.palette.primary.dark,alignItems:"center"},overrideaccordionshadowandmargin:{boxShadow:"none",border:"none",margin:"0","&$expanded":{margin:"0"}},expanded:{},urls:{marginLeft:e.spacing(2),wordBreak:"break-word",whiteSpace:"normal",textOverflow:"ellipsis"},processingQueue:Object(A.a)({},e.breakpoints.down("sm"),{fontSize:e.typography.body1.fontSize})}}));function He(e){var t=Object(s.c)(xe),n=Object(s.c)(Oe),i=Object(s.b)(),c=We();e.anchorEl;Object(a.useEffect)((function(){te.ref("queue/").on("value",(function(e){var t=e.val();console.log("queue changes"),console.log(t),i({type:"QUEUE_CHANGE",payload:t})}))}),[]);var o=r.a.useState(!1),l=Object(d.a)(o,2),u=l[0],g=l[1],j=Object(_e.a)();console.log("existingurls"),window.exu=t,console.log(t);var f=Object(ae.useSpring)({loop:!0,from:{rotateZ:0},to:{rotateZ:360}});return Object(P.jsx)(re.a,{direction:"up",in:Object.values(t).length>0&&n,mountOnEnter:!0,unmountOnExit:!0,children:Object(P.jsx)(ke.a,{borderRadius:"20px",boxShadow:3,m:0,style:{paddingRight:"8px",paddingLeft:"8px",paddingTop:"8px",paddingBottom:"8px"},bgcolor:"background.paper",className:c.root,children:Object(P.jsxs)(Ee.a,{expanded:!u,onChange:function(){g(!u)},classes:{root:c.overrideaccordionshadowandmargin,expanded:c.expanded},children:[Object(P.jsxs)(Ue.a,{expandIcon:Object(P.jsx)(ze.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",p:0,m:0,style:{paddingRight:"40px"},classes:{root:c.acsummary,content:c.acsummarycontent,expanded:c.expanded},children:[Object(P.jsxs)("div",{className:c.header,children:[Object(P.jsx)(ae.animated.div,{style:f,children:Object(P.jsx)(we.a,{style:{margin:"8px"},color:"primary",fontSize:"large"})}),Object(P.jsxs)("div",{children:[Object(P.jsx)(p.a,{variant:"h6",gutterBottom:!1,className:c.processingQueue,children:"Processing"}),!u&&Object(P.jsxs)(p.a,{variant:"caption",children:[Object.values(t).filter((function(e){return"downloading"===e.status})).length," page saving in progress..."]})]})]}),Object(P.jsx)(Le.a,{style:{position:"absolute",right:"0px",top:"8px"},"aria-label":"close",onClick:function(){return i(he())},children:Object(P.jsx)(Be.a,{fontSize:"small"})})]}),Object(P.jsx)(Ae.a,{style:{margin:0,padding:0},children:Object(P.jsx)("div",{className:c.body,children:Object.entries(t).map((function(e){var t=Object(d.a)(e,2),n=t[0],a=t[1];return"downloading"===a.status?Object(P.jsxs)("div",{className:c.lastchild,children:[Object(P.jsxs)("div",{className:c.urlcontainer,children:[Object(P.jsx)(Se.a,{fontSize:"small",color:"disabled"}),Object(P.jsxs)(p.a,{variant:"body2",className:c.urls,children:["Saving ",Pe(a.link,30)]})]}),Object(P.jsx)(b.a,{children:Object(P.jsx)(Re.a,{color:"primary"})})]},n):Object(P.jsxs)("div",{className:c.urlcontainercompleted,children:[Object(P.jsx)(Ce.a,{fontSize:"small"}),Object(P.jsx)(p.a,{className:c.urls,children:Pe(a.link,30)}),Object(P.jsx)("div",{className:c.checkmark,children:Object(P.jsx)(Me.Checkmark,{size:"medium",color:j.palette.primary.main})})]},n)}))})})]})})})}var Fe=n(243),Qe=n(241);function Ve(e){return Object(P.jsx)(Qe.a,Object(o.a)({elevation:6,variant:"filled"},e))}var Xe=function(){var e=Object(s.c)(H),t=Object(s.c)(F),n=Object(s.c)(Q),a=Object(s.b)(),r=function(e,t){"clickaway"!==t&&(console.log("trying to close"),a($()))};return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(l.a,{}),Object(P.jsx)(pe,{}),Object(P.jsx)(U,{}),Object(P.jsx)(Fe.a,{open:e,autoHideDuration:1200,onClose:r,children:Object(P.jsx)(Ve,{onClose:r,severity:n,children:t})}),Object(P.jsx)(He,{}),Object(P.jsx)(ge,{})]})};function $e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}var qe=Object(m.b)("counter/fetchCount",function(){var e=Object(f.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ge=Object(m.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}},extraReducers:function(e){e.addCase(qe.pending,(function(e){e.status="loading"})).addCase(qe.fulfilled,(function(e,t){e.status="idle",e.value+=t.payload}))}}),Je=Ge.actions,Ke=(Je.increment,Je.decrement,Je.incrementByAmount,Ge.reducer),Ze=n(122),Ye=n(70),et=j.a.mark(at),tt=j.a.mark(rt),nt=j.a.mark(it);function at(e){var t;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Ye.c)();case 2:return t=n.sent,console.log("queue changes async curState"),console.log(t),console.log("action:"),console.log(e),n.next=9,Object(Ye.b)(me(e.payload));case 9:return n.next=11,Object(Ye.b)(y());case 11:case"end":return n.stop()}}),et)}function rt(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ye.d)("QUEUE_CHANGE",at);case 2:case"end":return e.stop()}}),tt)}function it(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ye.a)([rt()]);case 2:case"end":return e.stop()}}),nt)}var ct=Object(Ze.a)(),ot=Object(m.a)({reducer:{counter:Ke,submissionbar:G,archive:S,progressdialog:ve},middleware:function(e){return[].concat(Object(u.a)(e()),[ct])}});ct.run(it);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(Object(P.jsx)(r.a.StrictMode,{children:Object(P.jsx)(s.a,{store:ot,children:Object(P.jsx)(Xe,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[173,1,2]]]);
//# sourceMappingURL=main.9f1b0a0e.chunk.js.map