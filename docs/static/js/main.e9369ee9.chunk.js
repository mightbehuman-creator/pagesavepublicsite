(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{132:function(e,t,n){},138:function(e,t,n){},158:function(e,t,n){e.exports={container:"SubmissionBar_container__20zvx",inputbar:"SubmissionBar_inputbar__eWceA"}},166:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(19),i=n.n(c),o=(n(132),n(34)),s=n(30),l=n(222),d=(n(138),n(15)),u=n(17),p=n(168),g=n(214),b=n(23),j=n.n(b),m=n(41),f=n(40),h=n(81),x=n.n(h),O="https://pagesave.herokuapp.com";function v(){var e="";return e=O+"/pagesave",new Promise((function(t,n){x.a.get(e,{}).then((function(e){console.log(e),t(e)})).catch((function(e){console.log(e),n(e)}))}))}var y=Object(f.b)("archive/fetchArchives",Object(m.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),k=Object(f.c)({name:"archive",initialState:{archives:[],status:"loading"},reducers:{},extraReducers:function(e){e.addCase(y.pending,(function(e){})).addCase(y.fulfilled,(function(e,t){e.status="idle",e.archives=t.payload}))}}),w=function(e){return e.archive.archives},N=function(e){return e.archive.status},S=k.reducer,I=n(211),C=n(215),B=n(225),T=n(216),P=n(7),R=Object(I.a)((function(e){return{centering:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:e.spacing(4)},archivecontainer:{marginTop:e.spacing(8)},firstArchive:{marginTop:e.spacing(4)},gridcontainer:{backgroundColor:e.palette.background.paper,display:"grid",gridTemplateColumns:"2fr 3fr 4fr",maxWidth:"100%",marginTop:e.spacing(3)},imgofpage:{width:"max-content",overflowY:"hidden",height:"100%",maxHeight:"100%",maxWidth:"100%",verticalAlign:"top",objectFit:"cover",objectPosition:"0% 0%"},archiveTitle:{fontFamily:"'Train One', cursive"},paper:{height:"100%"},fillheight:{height:"200px"}}}));function U(e){console.log("props withing single archive"),console.log(e);var t=R();return Object(P.jsxs)("div",{className:0==e.idx?t.firstArchive:t.archivecontainer,children:[Object(P.jsx)(p.a,{variant:"h5",gutterBottom:!0,children:e.title}),Object(P.jsxs)("div",{className:t.gridcontainer,children:[Object(P.jsx)(g.a,{className:t.fillheight,children:Object(P.jsx)(C.a,{elevation:3,className:t.paper,children:Object(P.jsx)("a",{href:e.img0B,target:"_blank",rel:"noopener noreferrer nofollow",children:Object(P.jsx)("img",{className:t.imgofpage,src:e.img0})})})}),Object(P.jsx)(g.a,{className:t.fillheight,children:Object(P.jsx)(C.a,{elevation:3,className:t.paper,children:Object(P.jsx)("a",{href:e.img1B,target:"_blank",rel:"noopener noreferrer nofollow",children:Object(P.jsx)("img",{className:t.imgofpage,src:e.img1})})})}),Object(P.jsx)(g.a,{className:t.fillheight,children:Object(P.jsx)(C.a,{elevation:3,className:t.paper,children:Object(P.jsx)("a",{href:e.img2B,target:"_blank",rel:"noopener noreferrer nofollow",children:Object(P.jsx)("img",{className:t.imgofpage,src:e.img2})})})})]}),Object(P.jsxs)(g.a,{style:{paddingTop:"16px",display:"flex",justifyContent:"space-between"},children:[Object(P.jsx)(T.a,{href:e.url,target:"_blank",rel:"noopener noreferrer nofollow",children:"Visit Link"}),Object(P.jsx)(T.a,{href:"#",children:"Set revision alert"})]})]})}function A(){var e=Object(s.b)(),t=Object(s.c)(w),n=Object(s.c)(N);console.log("reverse");var r=Object(u.a)(t).reverse(),c=Object(a.useState)(1),i=Object(d.a)(c,2),l=i[0],b=i[1],j=R();return Object(a.useEffect)((function(){console.log("running archive mounting stuff"),e(y())}),[]),"loading"!==n&&Object(P.jsxs)(g.a,{maxWidth:"md",children:[Object(P.jsx)(p.a,{variant:"h3",className:j.archiveTitle,gutterBottom:!0,children:"ARCHIVES"}),r.filter((function(e,t){return t>=5*(l-1)&&t<5*l})).map((function(e,t){return Object(P.jsx)(U,Object(o.a)({idx:t},e),e.id)})),Object(P.jsx)("div",{className:j.centering,children:Object(P.jsx)(B.a,{page:l,onChange:function(e,t){console.log(t),b(t)},count:Math.ceil(r.length/5),color:"secondary"})})]})}var D=n(14),E=n(218),z=n(113),_=n.n(z),L=n(223);n(158);function M(e){var t="";return t=O+"/pagesave",new Promise((function(n,a){x.a.post(t,{url:e}).then((function(e){console.log(e),n(e)})).catch((function(e){console.log(e),a(e)}))}))}var W=Object(f.b)("submissionbar/submitURL",function(){var e=Object(m.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("trying to submit async ".concat(t)),e.next=3,M(t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),H=function(e){return e.submissionbar.snackbarOpen},F=function(e){return e.submissionbar.snackbarMsg},Q=function(e){return e.submissionbar.snackbarType},V=Object(f.c)({name:"submissionbar",initialState:{status:"idle",snackbarOpen:!1,snackbarMsg:"",snackbarType:"error"},reducers:{closeSB:function(e){e.snackbarOpen=!1},showInvalidURLMsg:function(e){e.snackbarOpen=!0,e.snackbarMsg="Url is invalid",e.snackbarType="error"}},extraReducers:function(e){e.addCase(W.pending,(function(e){e.status="submitting"})).addCase(W.fulfilled,(function(e,t){e.status="idle",e.snackbarOpen=!0,e.snackbarMsg="Url submitted",e.snackbarType="success"}))}}),X=V.actions,$=X.closeSB,q=X.showInvalidURLMsg,G=V.reducer,J=n(112),K=n.n(J),Z=Object(I.a)((function(e){return{container:{marginTop:e.spacing(8)},savebutton:Object(D.a)({minWidth:"150px",alignSelf:"flex-end",height:"56px"},e.breakpoints.up("md"),{flexDirection:"row",minwidth:"0px",marginLeft:"32px"}),input:{width:"80%"},root:Object(D.a)({margin:"auto",display:"flex",justifyContent:"center",alignItems:"center","& > *":{margin:e.spacing(2)},flexDirection:"column"},e.breakpoints.up("sm"),{flexDirection:"row",maxWidth:"500px"})}}));function Y(){var e=Object(s.b)(),t=r.a.createRef(),n=function(n){n.preventDefault();var a=t.current.value;console.log(a),K.a.isUri(a)?(console.log("Looks like an URI"),e(W(a)),t.current.value=""):(console.log("Not a URI"),e(q()))},a=Z();return Object(P.jsx)("div",{className:a.container,children:Object(P.jsxs)("form",{className:a.root,onSubmit:n,noValidate:!0,autoComplete:"off",children:[Object(P.jsx)(L.a,{inputRef:t,className:a.input,label:"Enter url of page to save"}),Object(P.jsx)(E.a,{className:a.savebutton,startIcon:Object(P.jsx)(_.a,{}),variant:"contained",color:"primary",onClick:n,children:"Save"})]})})}var ee=n(91);ee.a.initializeApp({apiKey:"AIzaSyCTKDCCVasMozc94FO9WexvvBkvHaXrn-w",authDomain:"page-save.firebaseapp.com",databaseURL:"https://page-save-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"page-save",storageBucket:"page-save.appspot.com",messagingSenderId:"191537973535",appId:"1:191537973535:web:e9521da8ba973166a8082a",measurementId:"G-HX28BXHXWD"});var te=ee.a.database(),ne=n.p+"static/media/disk.4e864010.svg",ae=n(67),re=Object(I.a)({title:{fontFamily:"'Train One', cursive"},heroBackground:Object(D.a)({width:"100%",margin:0,textAlign:"center",height:"500px",paddingTop:"120px",boxSizing:"border-box"},"height","100vh"),greenIndicator:{background:"#28B62C",display:"inline-block",width:"1em",height:"1em",borderRadius:"50%",animation:"$pulse 2s infinite linear"},redIndicator:{background:"red",display:"inline-block",width:"1em",height:"1em",borderRadius:"50%"},"@keyframes pulse":{"0%":{transform:"scale(1)"},"25%":{transform:"scale(1)"},"50%":{transform:"scale(1.2)"},"75%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}});function ce(){var e=re(),t=Object(a.useState)("offline"),n=Object(d.a)(t,2),r=n[0],c=n[1],i=Object(ae.useSpring)({loop:!0,to:[{opacity:1,color:"#ffaaee"},{opacity:0,color:"rgb(14,26,19)"}],from:{opacity:0,color:"red"}});return Object(a.useEffect)((function(){te.ref("status").on("value",(function(e){console.log("status: "+e.val()),c(e.val())}),(function(e){console.log("The read failed: "+e.name)}))}),[]),Object(P.jsxs)(P.Fragment,{children:[Object(P.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",margin:"16px"},children:["online"===r?Object(P.jsx)("span",{className:e.greenIndicator}):Object(P.jsx)("span",{className:e.redIndicator}),Object(P.jsx)(p.a,{className:e.title,style:{marginLeft:"8px"},variant:"subtitle2",gutterBottom:!0,children:r})]}),Object(P.jsxs)("div",{className:e.heroBackground,children:[Object(P.jsxs)("div",{style:{position:"relative"},children:[Object(P.jsx)(ae.animated.div,{style:i,children:Object(P.jsx)("img",{src:ne,style:{position:"absolute",right:"60px",width:"32px",height:"32px",transform:"rotate(45deg)"}})}),Object(P.jsx)(p.a,{className:e.title,variant:"h2",gutterBottom:!0,children:"Page Saver"})]}),Object(P.jsx)(Y,{})]})]})}var ie=Object(I.a)((function(e){return{footercontainer:{minHeight:"100px",display:"flex",justifyContent:"center",alignItems:"center",background:e.palette.primary.dark,borderTop:"1px solid black"},footertext:{margin:"auto",textAlign:"center",color:e.palette.primary.contrastText},footerMarginTop:{marginTop:e.spacing(4)}}})),oe=function(){var e=ie();return Object(P.jsx)("footer",{className:e.footerMarginTop,children:Object(P.jsx)("div",{className:e.footercontainer,children:Object(P.jsx)(p.a,{className:e.footertext,variant:"subtitle",children:"mightbehuman@protonmail.com"})})})},se=Object(f.c)({name:"progressdialog",initialState:{urlsInProgress:{},showProgressDialog:!0},reducers:{closeDialog:function(e,t){e.showProgressDialog=!1},updateUrls:function(e,t){console.log("received update url actions"),console.log(t.payload);var n=Object(o.a)({},e);n.showProgressDialog=!0;for(var a=0,r=Object.entries(t.payload||{});a<r.length;a++){var c=Object(d.a)(r[a],2),i=c[0],s=c[1];console.log("Checking from action payload: "+s),"undefined"===typeof e.urlsInProgress[i]&&(console.log("added new:"+s),n.urlsInProgress=Object(o.a)(Object(o.a)({},n.urlsInProgress),{},Object(D.a)({},i,{link:s,status:"downloading"})))}for(var l=0,u=Object.entries(e.urlsInProgress);l<u.length;l++){var p=Object(d.a)(u[l],2),g=p[0],b=p[1],j=b.status,m=b.link;console.log("Checking from state: "+j+" "+m),t.payload&&"undefined"!==typeof t.payload[g]||(console.log("completed:"+m),n.urlsInProgress=Object(o.a)(Object(o.a)({},n.urlsInProgress),{},Object(D.a)({},g,Object(o.a)(Object(o.a)({},n.urlsInProgress[g]),{},{status:"completed"}))))}return n}}}),le=se.actions,de=le.updateUrls,ue=le.closeDialog,pe=function(e){return e.progressdialog.urlsInProgress},ge=function(e){return e.progressdialog.showProgressDialog},be=se.reducer,je=n(116),me=n.n(je),fe=n(224),he=n(118),xe=n.n(he),Oe=n(119),ve=n.n(Oe),ye=n(117),ke=n.n(ye);function we(e,t){return e.length<t?e:e.substr(0,t)+"\u2026"}var Ne=n(221),Se=n(228),Ie=n(219),Ce=n(220),Be=n(115),Te=n.n(Be),Pe=n(114),Re=n(44),Ue=n(169),Ae=Object(I.a)((function(e){return{root:{maxWidth:"90vw",position:"fixed",bottom:"0px",right:"0px",margin:"16px",paddingBottom:"0px"},header:{display:"flex",background:"white",borderRadius:"10px 10px 0px 0px",alignItems:"center"},headericon:{},acsummary:{padding:"0px"},acsummarycontent:{padding:"0px",margin:"0px","&$expanded":{margin:"0px",padding:"0px"}},lastchild:{"&:last-child":{paddingBottom:"8px"}},checkmark:{marginLeft:"auto"},urlcontainer:{display:"flex",padding:e.spacing(1)+"px "+e.spacing(1)+"px",width:"inherit",alignItems:"center"},urlcontainercompleted:{display:"flex",padding:e.spacing(1)+"px "+e.spacing(3)+"px",color:e.palette.primary.dark,alignItems:"center"},overrideaccordionshadowandmargin:{boxShadow:"none",border:"none",margin:"0","&$expanded":{margin:"0"}},expanded:{},urls:{marginLeft:e.spacing(2),wordBreak:"break-word",whiteSpace:"normal",textOverflow:"ellipsis"},processingQueue:Object(D.a)({},e.breakpoints.down("sm"),{fontSize:e.typography.body1.fontSize})}}));function De(e){var t=Object(s.c)(pe),n=Object(s.c)(ge),c=Object(s.b)(),i=Ae();e.anchorEl;Object(a.useEffect)((function(){te.ref("queue/").on("value",(function(e){var t=e.val();console.log("queue changes"),console.log(t),c({type:"QUEUE_CHANGE",payload:t})}))}),[]);var o=r.a.useState(!1),l=Object(d.a)(o,2),u=l[0],b=l[1],j=Object(Re.a)();console.log("existingurls"),window.exu=t,console.log(t);var m=Object(ae.useSpring)({loop:!0,from:{rotateZ:0},to:{rotateZ:360}});return Object.values(t).length>0&&n&&Object(P.jsx)(fe.a,{borderRadius:"20px",boxShadow:3,m:0,style:{paddingRight:"8px",paddingLeft:"8px",paddingTop:"8px",paddingBottom:"8px"},bgcolor:"background.paper",className:i.root,children:Object(P.jsxs)(Se.a,{expanded:!u,onChange:function(){b(!u)},classes:{root:i.overrideaccordionshadowandmargin,expanded:i.expanded},children:[Object(P.jsxs)(Ie.a,{expandIcon:Object(P.jsx)(Te.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",p:0,m:0,style:{paddingRight:"40px"},classes:{root:i.acsummary,content:i.acsummarycontent,expanded:i.expanded},children:[Object(P.jsxs)("div",{className:i.header,children:[Object(P.jsx)(ae.animated.div,{style:m,children:Object(P.jsx)(me.a,{style:{margin:"8px"},color:"primary",fontSize:"large"})}),Object(P.jsxs)("div",{children:[Object(P.jsx)(p.a,{variant:"h6",gutterBottom:!1,className:i.processingQueue,children:"Processing"}),!u&&Object(P.jsxs)(p.a,{variant:"caption",children:[Object.values(t).filter((function(e){return"downloading"===e.status})).length," page saving in progress..."]})]})]}),Object(P.jsx)(Ue.a,{style:{position:"absolute",right:"0px",top:"8px"},"aria-label":"close",onClick:function(){return c(ue())},children:Object(P.jsx)(ke.a,{fontSize:"small"})})]}),Object(P.jsx)(Ce.a,{style:{margin:0,padding:0},children:Object(P.jsx)("div",{className:i.body,children:Object.entries(t).map((function(e){var t=Object(d.a)(e,2),n=t[0],a=t[1];return"downloading"===a.status?Object(P.jsxs)("div",{className:i.lastchild,children:[Object(P.jsxs)("div",{className:i.urlcontainer,children:[Object(P.jsx)(xe.a,{fontSize:"small",color:"disabled"}),Object(P.jsxs)(p.a,{variant:"body2",className:i.urls,children:["Saving ",we(a.link,30)]})]}),Object(P.jsx)(g.a,{children:Object(P.jsx)(Ne.a,{color:"primary"})})]},n):Object(P.jsxs)("div",{className:i.urlcontainercompleted,children:[Object(P.jsx)(ve.a,{fontSize:"small"}),Object(P.jsx)(p.a,{className:i.urls,children:we(a.link,30)}),Object(P.jsx)("div",{className:i.checkmark,children:Object(P.jsx)(Pe.Checkmark,{size:"medium",color:j.palette.primary.main})})]},n)}))})})]})})}var Ee=n(227),ze=n(226);function _e(e){return Object(P.jsx)(ze.a,Object(o.a)({elevation:6,variant:"filled"},e))}var Le=function(){var e=Object(s.c)(H),t=Object(s.c)(F),n=Object(s.c)(Q),a=Object(s.b)(),r=function(e,t){"clickaway"!==t&&(console.log("trying to close"),a($()))};return Object(P.jsxs)(P.Fragment,{children:[Object(P.jsx)(l.a,{}),Object(P.jsx)(ce,{}),Object(P.jsx)(A,{}),Object(P.jsx)(Ee.a,{open:e,autoHideDuration:1200,onClose:r,children:Object(P.jsx)(_e,{onClose:r,severity:n,children:t})}),Object(P.jsx)(De,{}),Object(P.jsx)(oe,{})]})};function Me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}var We=Object(f.b)("counter/fetchCount",function(){var e=Object(m.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),He=Object(f.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}},extraReducers:function(e){e.addCase(We.pending,(function(e){e.status="loading"})).addCase(We.fulfilled,(function(e,t){e.status="idle",e.value+=t.payload}))}}),Fe=He.actions,Qe=(Fe.increment,Fe.decrement,Fe.incrementByAmount,He.reducer),Ve=n(120),Xe=n(69),$e=j.a.mark(Je),qe=j.a.mark(Ke),Ge=j.a.mark(Ze);function Je(e){var t;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(Xe.c)();case 2:return t=n.sent,console.log("queue changes async curState"),console.log(t),console.log("action:"),console.log(e),n.next=9,Object(Xe.b)(de(e.payload));case 9:return n.next=11,Object(Xe.b)(y());case 11:case"end":return n.stop()}}),$e)}function Ke(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Xe.d)("QUEUE_CHANGE",Je);case 2:case"end":return e.stop()}}),qe)}function Ze(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Xe.a)([Ke()]);case 2:case"end":return e.stop()}}),Ge)}var Ye=Object(Ve.a)(),et=Object(f.a)({reducer:{counter:Qe,submissionbar:G,archive:S,progressdialog:be},middleware:function(e){return[].concat(Object(u.a)(e()),[Ye])}});Ye.run(Ze);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(P.jsx)(r.a.StrictMode,{children:Object(P.jsx)(s.a,{store:et,children:Object(P.jsx)(Le,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[166,1,2]]]);
//# sourceMappingURL=main.e9369ee9.chunk.js.map