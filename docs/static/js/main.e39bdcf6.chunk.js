(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{107:function(e,t,a){},113:function(e,t,a){},133:function(e,t,a){e.exports={container:"SubmissionBar_container__20zvx",inputbar:"SubmissionBar_inputbar__eWceA"}},140:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(15),i=a.n(c),s=(a(107),a(26)),o=a(25),l=a(193),u=(a(113),a(21)),d=a(19),j=a(184),b=a(186),p=a(34),g=a.n(p),m=a(47),h=a(29),f=a(64),x=a.n(f),v="https://pagesave.herokuapp.com";function O(){var e="";return e=v+"/pagesave",new Promise((function(t,a){x.a.get(e,{}).then((function(e){console.log(e),t(e)})).catch((function(e){console.log(e),a(e)}))}))}var y=Object(h.b)("archive/fetchArchives",Object(m.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),k=Object(h.c)({name:"archive",initialState:{archives:[],status:"idle"},reducers:{},extraReducers:function(e){e.addCase(y.pending,(function(e){e.status="loading"})).addCase(y.fulfilled,(function(e,t){e.status="idle",e.archives=t.payload}))}}),w=function(e){return e.archive.archives},N=function(e){return e.archive.status},C=k.reducer,I=a(182),S=a(187),T=a(196),B=a(6),P=Object(I.a)((function(e){return{centering:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:e.spacing(4)},archivecontainer:{marginTop:e.spacing(8)},firstArchive:{marginTop:e.spacing(4)},gridcontainer:{backgroundColor:e.palette.background.paper,display:"grid",gridTemplateColumns:"2fr 3fr 4fr",maxWidth:"100%",marginTop:e.spacing(3)},imgofpage:{width:"max-content",overflowY:"hidden",height:"100%",maxHeight:"100%",maxWidth:"100%",verticalAlign:"top",objectFit:"cover",objectPosition:"0% 0%"},archiveTitle:{fontFamily:"'Train One', cursive"},paper:{height:"100%"},fillheight:{height:"200px"}}}));function A(e){console.log(e);var t=P();return Object(B.jsxs)("div",{className:0==e.idx?t.firstArchive:t.archivecontainer,children:[Object(B.jsx)(j.a,{variant:"h5",gutterBottom:!0,children:e.title}),Object(B.jsxs)("div",{className:t.gridcontainer,children:[Object(B.jsx)(b.a,{className:t.fillheight,children:Object(B.jsx)(S.a,{elevation:3,className:t.paper,children:Object(B.jsx)("a",{href:e.img0,target:"_blank",children:Object(B.jsx)("img",{className:t.imgofpage,src:e.img0})})})}),Object(B.jsx)(b.a,{className:t.fillheight,children:Object(B.jsx)(S.a,{elevation:3,className:t.paper,children:Object(B.jsx)("a",{href:e.img1,target:"_blank",children:Object(B.jsx)("img",{className:t.imgofpage,src:e.img1})})})}),Object(B.jsx)(b.a,{className:t.fillheight,children:Object(B.jsx)(S.a,{elevation:3,className:t.paper,children:Object(B.jsx)("a",{href:e.img2,target:"_blank",children:Object(B.jsx)("img",{className:t.imgofpage,src:e.img2})})})})]})]})}function R(){var e=Object(o.b)(),t=Object(o.c)(w),a=Object(o.c)(N);console.log("reverse");var r=Object(d.a)(t).reverse(),c=Object(n.useState)(1),i=Object(u.a)(c,2),l=i[0],p=i[1],g=P();return Object(n.useEffect)((function(){console.log("running archive mounting stuff"),e(y())}),[]),"loading"!==a&&Object(B.jsxs)(b.a,{maxWidth:"md",children:[Object(B.jsx)(j.a,{variant:"h3",className:g.archiveTitle,gutterBottom:!0,children:"ARCHIVES"}),r.filter((function(e,t){return t>=5*(l-1)&&t<5*l})).map((function(e,t){return Object(B.jsx)(A,Object(s.a)({idx:t},e),e.id)})),Object(B.jsx)("div",{className:g.centering,children:Object(B.jsx)(T.a,{page:l,onChange:function(e,t){console.log(t),p(t)},count:Math.ceil(r.length/5),color:"secondary"})})]})}var W=a(11),z=a(189),_=a(89),D=a.n(_),H=a(194);a(133);function E(e){var t="";return t=v+"/pagesave",new Promise((function(a,n){x.a.post(t,{url:e}).then((function(e){console.log(e),a(e)})).catch((function(e){console.log(e),n(e)}))}))}var L=Object(h.b)("submissionbar/submitURL",function(){var e=Object(m.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("trying to submit async ".concat(t)),e.next=3,E(t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),F=function(e){return e.submissionbar.snackbarOpen},M=Object(h.c)({name:"submissionbar",initialState:{status:"idle",snackbarOpen:!1},reducers:{closeSB:function(e){e.snackbarOpen=!1}},extraReducers:function(e){e.addCase(L.pending,(function(e){e.status="submitting"})).addCase(L.fulfilled,(function(e,t){e.status="idle",e.snackbarOpen=!0}))}}),U=M.actions.closeSB,X=M.reducer,q=Object(I.a)((function(e){return{container:{marginTop:e.spacing(8)},savebutton:Object(W.a)({minWidth:"150px",alignSelf:"flex-end",height:"56px"},e.breakpoints.up("md"),{flexDirection:"row",minwidth:"0px",marginLeft:"32px"}),input:{width:"80%"},root:Object(W.a)({margin:"auto",display:"flex",justifyContent:"center",alignItems:"center","& > *":{margin:e.spacing(2)},flexDirection:"column"},e.breakpoints.up("sm"),{flexDirection:"row",maxWidth:"500px"})}}));function V(){var e=Object(o.b)(),t=r.a.createRef(),a=q();return Object(B.jsx)("div",{className:a.container,children:Object(B.jsxs)("form",{className:a.root,noValidate:!0,autoComplete:"off",children:[Object(B.jsx)(H.a,{inputRef:t,className:a.input,label:"Enter url of page to save"}),Object(B.jsx)(z.a,{className:a.savebutton,startIcon:Object(B.jsx)(D.a,{}),variant:"contained",color:"primary",onClick:function(){var a=t.current.value;console.log(a),e(L(a)),t.current.value=""},children:"Save"})]})})}var J=Object(I.a)({title:{fontFamily:"'Train One', cursive"},heroBackground:Object(W.a)({width:"100%",margin:0,textAlign:"center",height:"500px",paddingTop:"120px",boxSizing:"border-box"},"height","100vh")});function K(){var e=J();return Object(B.jsxs)("div",{className:e.heroBackground,children:[Object(B.jsx)(j.a,{className:e.title,variant:"h2",gutterBottom:!0,children:"Page Saver"}),Object(B.jsx)("div",{}),Object(B.jsx)(V,{})]})}var G=Object(I.a)((function(e){return{footercontainer:{minHeight:"100px",display:"flex",justifyContent:"center",alignItems:"center",background:e.palette.primary.dark,borderTop:"1px solid black"},footertext:{margin:"auto",textAlign:"center",color:e.palette.primary.contrastText},footerMarginTop:{marginTop:e.spacing(4)}}})),Y=function(){var e=G();return Object(B.jsx)("footer",{className:e.footerMarginTop,children:Object(B.jsx)("div",{className:e.footercontainer,children:Object(B.jsx)(j.a,{className:e.footertext,variant:"subtitle",children:"mightbehuman@protonmail.com"})})})},$=a(72);$.a.initializeApp({apiKey:"AIzaSyCTKDCCVasMozc94FO9WexvvBkvHaXrn-w",authDomain:"page-save.firebaseapp.com",databaseURL:"https://page-save-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"page-save",storageBucket:"page-save.appspot.com",messagingSenderId:"191537973535",appId:"1:191537973535:web:e9521da8ba973166a8082a",measurementId:"G-HX28BXHXWD"});var Q=$.a.database(),Z=Object(h.c)({name:"progressdialog",initialState:{urlsInProgress:{sdfsd:{link:"https://yahoo.com",state:"completed"}}},reducers:{updateUrls:function(e,t){console.log("received update url actions"),console.log(t.payload);for(var a=Object(s.a)({},e),n=0,r=Object.entries(t.payload||{});n<r.length;n++){var c=Object(u.a)(r[n],2),i=c[0],o=c[1];console.log("Checking from action payload: "+o),"undefined"===typeof e.urlsInProgress[i]&&(console.log("added new:"+o),a.urlsInProgress=Object(s.a)(Object(s.a)({},a.urlsInProgress),{},Object(W.a)({},i,{link:o,status:"downloading"})))}for(var l=0,d=Object.entries(e.urlsInProgress);l<d.length;l++){var j=Object(u.a)(d[l],2),b=j[0],p=j[1],g=p.status,m=p.link;console.log("Checking from state: "+g+" "+m),t.payload&&"undefined"!==typeof t.payload[b]||(console.log("completed:"+m),a.urlsInProgress=Object(s.a)(Object(s.a)({},a.urlsInProgress),{},Object(W.a)({},b,Object(s.a)(Object(s.a)({},a.urlsInProgress[b]),{},{status:"completed"}))))}return a}}}),ee=Z.actions.updateUrls,te=function(e){return e.progressdialog.urlsInProgress},ae=Z.reducer,ne=a(92),re=a.n(ne),ce=a(195),ie=a(93),se=a.n(ie),oe=a(94),le=a.n(oe);function ue(e,t){return e.length<t?e:e.substr(0,t)+"\u2026"}var de=a(192),je=a(199),be=a(190),pe=a(191),ge=a(91),me=a.n(ge),he=a(90),fe=a(30),xe=Object(I.a)((function(e){return{root:{maxWidth:"100vw",position:"fixed",bottom:"16px",right:"16px"},header:{display:"flex",background:"white",borderRadius:"10px 10px 0px 0px",alignItems:"center"},headericon:{},checkmark:{marginLeft:"auto"},url:{},urlcontainer:{display:"flex",padding:e.spacing(1)+"px "+e.spacing(3)+"px",alignItems:"center"},urlcontainercompleted:{display:"flex",padding:e.spacing(1)+"px "+e.spacing(3)+"px",color:e.palette.primary.dark,alignItems:"center"},urls:{marginLeft:e.spacing(2)}}}));function ve(e){var t=Object(o.c)(te),a=Object(o.b)(),c=xe();e.anchorEl;Object(n.useEffect)((function(){Q.ref("queue/").on("value",(function(e){var t=e.val();console.log("queue changes"),console.log(t),a(ee(t))}))}),[]);var i=r.a.useState(!1),s=Object(u.a)(i,2),l=s[0],d=s[1],p=Object(fe.a)();return Object(B.jsx)(ce.a,{borderRadius:"50%",boxShadow:3,m:1,p:3,bgcolor:"background.paper",className:c.root,children:Object(B.jsxs)(je.a,{expanded:!l,onChange:function(){d(!l)},children:[Object(B.jsx)(be.a,{expandIcon:Object(B.jsx)(me.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(B.jsxs)("div",{className:c.header,children:[Object(B.jsx)(re.a,{style:{margin:"8px"},color:"primary",fontSize:"large"}),Object(B.jsxs)("div",{children:[Object(B.jsx)(j.a,{variant:"h5",gutterBottom:!1,children:"Processing queue"}),Object(B.jsxs)(j.a,{variant:"caption",children:[Object.values(t).filter((function(e){return"downloading"===e.status})).length," page saving in progress"]})]})]})}),Object(B.jsx)(pe.a,{children:Object(B.jsx)("div",{className:c.body,children:Object.entries(t).map((function(e){var t=Object(u.a)(e,2),a=t[0],n=t[1];return"downloading"===n.status?Object(B.jsxs)("div",{children:[Object(B.jsxs)("div",{className:c.urlcontainer,children:[Object(B.jsx)(se.a,{fontSize:"large",color:"disabled"}),Object(B.jsxs)(j.a,{className:c.urls,children:["Saving ",ue(n.link,30)]})]}),Object(B.jsx)(b.a,{children:Object(B.jsx)(de.a,{color:"primary"})})]},a):Object(B.jsxs)("div",{className:c.urlcontainercompleted,children:[Object(B.jsx)(le.a,{fontSize:"large"}),Object(B.jsx)(j.a,{className:c.urls,children:ue(n.link,30)}),Object(B.jsx)("div",{className:c.checkmark,children:Object(B.jsx)(he.Checkmark,{size:"medium",color:p.palette.primary.main})})]},a)}))})})]})})}var Oe=a(198),ye=a(197);function ke(e){return Object(B.jsx)(ye.a,Object(s.a)({elevation:6,variant:"filled"},e))}var we=function(){var e=Object(o.c)(F),t=Object(o.b)(),a=function(e,a){"clickaway"!==a&&(console.log("trying to close"),t(U()))};return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(l.a,{}),Object(B.jsx)(K,{}),Object(B.jsx)(R,{}),Object(B.jsx)(Oe.a,{open:e,autoHideDuration:1200,onClose:a,children:Object(B.jsx)(ke,{onClose:a,severity:"success",children:"URL saved!"})}),Object(B.jsx)(ve,{}),Object(B.jsx)(Y,{})]})};function Ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}var Ce=Object(h.b)("counter/fetchCount",function(){var e=Object(m.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne(t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ie=Object(h.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}},extraReducers:function(e){e.addCase(Ce.pending,(function(e){e.status="loading"})).addCase(Ce.fulfilled,(function(e,t){e.status="idle",e.value+=t.payload}))}}),Se=Ie.actions,Te=(Se.increment,Se.decrement,Se.incrementByAmount,Ie.reducer),Be=Object(h.a)({reducer:{counter:Te,submissionbar:X,archive:C,progressdialog:ae}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(B.jsx)(r.a.StrictMode,{children:Object(B.jsx)(o.a,{store:Be,children:Object(B.jsx)(we,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[140,1,2]]]);
//# sourceMappingURL=main.e39bdcf6.chunk.js.map