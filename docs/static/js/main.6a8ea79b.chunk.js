(this.webpackJsonpwebapp=this.webpackJsonpwebapp||[]).push([[0],{115:function(e,t,n){},121:function(e,t,n){},141:function(e,t,n){e.exports={container:"SubmissionBar_container__20zvx",inputbar:"SubmissionBar_inputbar__eWceA"}},149:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(18),i=n.n(c),s=(n(115),n(30)),o=n(27),l=n(202),u=(n(121),n(23)),d=n(20),b=n(193),p=n(195),g=n(29),j=n.n(g),f=n(51),m=n(33),h=n(70),x=n.n(h),O="https://pagesave.herokuapp.com";function v(){var e="";return e=O+"/pagesave",new Promise((function(t,n){x.a.get(e,{}).then((function(e){console.log(e),t(e)})).catch((function(e){console.log(e),n(e)}))}))}var k=Object(m.b)("archive/fetchArchives",Object(f.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),y=Object(m.c)({name:"archive",initialState:{archives:[],status:"loading"},reducers:{},extraReducers:function(e){e.addCase(k.pending,(function(e){})).addCase(k.fulfilled,(function(e,t){e.status="idle",e.archives=t.payload}))}}),w=function(e){return e.archive.archives},N=function(e){return e.archive.status},I=y.reducer,C=n(191),S=n(196),T=n(205),B=n(7),R=Object(C.a)((function(e){return{centering:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:e.spacing(4)},archivecontainer:{marginTop:e.spacing(8)},firstArchive:{marginTop:e.spacing(4)},gridcontainer:{backgroundColor:e.palette.background.paper,display:"grid",gridTemplateColumns:"2fr 3fr 4fr",maxWidth:"100%",marginTop:e.spacing(3)},imgofpage:{width:"max-content",overflowY:"hidden",height:"100%",maxHeight:"100%",maxWidth:"100%",verticalAlign:"top",objectFit:"cover",objectPosition:"0% 0%"},archiveTitle:{fontFamily:"'Train One', cursive"},paper:{height:"100%"},fillheight:{height:"200px"}}}));function P(e){console.log("props withing single archive"),console.log(e);var t=R();return Object(B.jsxs)("div",{className:0==e.idx?t.firstArchive:t.archivecontainer,children:[Object(B.jsx)(b.a,{variant:"h5",gutterBottom:!0,children:e.title}),Object(B.jsxs)("div",{className:t.gridcontainer,children:[Object(B.jsx)(p.a,{className:t.fillheight,children:Object(B.jsx)(S.a,{elevation:3,className:t.paper,children:Object(B.jsx)("a",{href:e.img0B,target:"_blank",children:Object(B.jsx)("img",{className:t.imgofpage,src:e.img0})})})}),Object(B.jsx)(p.a,{className:t.fillheight,children:Object(B.jsx)(S.a,{elevation:3,className:t.paper,children:Object(B.jsx)("a",{href:e.img1B,target:"_blank",children:Object(B.jsx)("img",{className:t.imgofpage,src:e.img1})})})}),Object(B.jsx)(p.a,{className:t.fillheight,children:Object(B.jsx)(S.a,{elevation:3,className:t.paper,children:Object(B.jsx)("a",{href:e.img2B,target:"_blank",children:Object(B.jsx)("img",{className:t.imgofpage,src:e.img2})})})})]})]})}function U(){var e=Object(o.b)(),t=Object(o.c)(w),n=Object(o.c)(N);console.log("reverse");var r=Object(d.a)(t).reverse(),c=Object(a.useState)(1),i=Object(u.a)(c,2),l=i[0],g=i[1],j=R();return Object(a.useEffect)((function(){console.log("running archive mounting stuff"),e(k())}),[]),"loading"!==n&&Object(B.jsxs)(p.a,{maxWidth:"md",children:[Object(B.jsx)(b.a,{variant:"h3",className:j.archiveTitle,gutterBottom:!0,children:"ARCHIVES"}),r.filter((function(e,t){return t>=5*(l-1)&&t<5*l})).map((function(e,t){return Object(B.jsx)(P,Object(s.a)({idx:t},e),e.id)})),Object(B.jsx)("div",{className:j.centering,children:Object(B.jsx)(T.a,{page:l,onChange:function(e,t){console.log(t),g(t)},count:Math.ceil(r.length/5),color:"secondary"})})]})}var A=n(13),E=n(198),M=n(96),W=n.n(M),_=n(203);n(141);function z(e){var t="";return t=O+"/pagesave",new Promise((function(n,a){x.a.post(t,{url:e}).then((function(e){console.log(e),n(e)})).catch((function(e){console.log(e),a(e)}))}))}var H=Object(m.b)("submissionbar/submitURL",function(){var e=Object(f.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("trying to submit async ".concat(t)),e.next=3,z(t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),L=function(e){return e.submissionbar.snackbarOpen},D=function(e){return e.submissionbar.snackbarMsg},F=function(e){return e.submissionbar.snackbarType},q=Object(m.c)({name:"submissionbar",initialState:{status:"idle",snackbarOpen:!1,snackbarMsg:"",snackbarType:"error"},reducers:{closeSB:function(e){e.snackbarOpen=!1},showInvalidURLMsg:function(e){e.snackbarOpen=!0,e.snackbarMsg="Url is invalid",e.snackbarType="error"}},extraReducers:function(e){e.addCase(H.pending,(function(e){e.status="submitting"})).addCase(H.fulfilled,(function(e,t){e.status="idle",e.snackbarOpen=!0,e.snackbarMsg="Url submitted",e.snackbarType="success"}))}}),X=q.actions,G=X.closeSB,V=X.showInvalidURLMsg,J=q.reducer,K=n(95),Q=n.n(K),$=Object(C.a)((function(e){return{container:{marginTop:e.spacing(8)},savebutton:Object(A.a)({minWidth:"150px",alignSelf:"flex-end",height:"56px"},e.breakpoints.up("md"),{flexDirection:"row",minwidth:"0px",marginLeft:"32px"}),input:{width:"80%"},root:Object(A.a)({margin:"auto",display:"flex",justifyContent:"center",alignItems:"center","& > *":{margin:e.spacing(2)},flexDirection:"column"},e.breakpoints.up("sm"),{flexDirection:"row",maxWidth:"500px"})}}));function Y(){var e=Object(o.b)(),t=r.a.createRef(),n=function(n){n.preventDefault();var a=t.current.value;console.log(a),Q.a.isUri(a)?(console.log("Looks like an URI"),e(H(a)),t.current.value=""):(console.log("Not a URI"),e(V()))},a=$();return Object(B.jsx)("div",{className:a.container,children:Object(B.jsxs)("form",{className:a.root,onSubmit:n,noValidate:!0,autoComplete:"off",children:[Object(B.jsx)(_.a,{inputRef:t,className:a.input,label:"Enter url of page to save"}),Object(B.jsx)(E.a,{className:a.savebutton,startIcon:Object(B.jsx)(W.a,{}),variant:"contained",color:"primary",onClick:n,children:"Save"})]})})}var Z=n(78);Z.a.initializeApp({apiKey:"AIzaSyCTKDCCVasMozc94FO9WexvvBkvHaXrn-w",authDomain:"page-save.firebaseapp.com",databaseURL:"https://page-save-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"page-save",storageBucket:"page-save.appspot.com",messagingSenderId:"191537973535",appId:"1:191537973535:web:e9521da8ba973166a8082a",measurementId:"G-HX28BXHXWD"});var ee=Z.a.database(),te=Object(C.a)({title:{fontFamily:"'Train One', cursive"},heroBackground:Object(A.a)({width:"100%",margin:0,textAlign:"center",height:"500px",paddingTop:"120px",boxSizing:"border-box"},"height","100vh"),greenIndicator:{background:"#28B62C",display:"inline-block",width:"1em",height:"1em",borderRadius:"50%",animation:"$pulse 2s infinite linear"},redIndicator:{background:"red",display:"inline-block",width:"1em",height:"1em",borderRadius:"50%"},"@keyframes pulse":{"0%":{transform:"scale(1)"},"25%":{transform:"scale(1)"},"50%":{transform:"scale(1.2)"},"75%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}});function ne(){var e=te(),t=Object(a.useState)("offline"),n=Object(u.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)((function(){ee.ref("status").on("value",(function(e){console.log("status: "+e.val()),c(e.val())}),(function(e){console.log("The read failed: "+e.name)}))}),[]),Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",margin:"16px"},children:["online"===r?Object(B.jsx)("span",{className:e.greenIndicator}):Object(B.jsx)("span",{className:e.redIndicator}),Object(B.jsx)(b.a,{className:e.title,style:{marginLeft:"8px"},variant:"subtitle2",gutterBottom:!0,children:r})]}),Object(B.jsxs)("div",{className:e.heroBackground,children:[Object(B.jsx)(b.a,{className:e.title,variant:"h2",gutterBottom:!0,children:"Page Saver"}),Object(B.jsx)("div",{}),Object(B.jsx)(Y,{})]})]})}var ae=Object(C.a)((function(e){return{footercontainer:{minHeight:"100px",display:"flex",justifyContent:"center",alignItems:"center",background:e.palette.primary.dark,borderTop:"1px solid black"},footertext:{margin:"auto",textAlign:"center",color:e.palette.primary.contrastText},footerMarginTop:{marginTop:e.spacing(4)}}})),re=function(){var e=ae();return Object(B.jsx)("footer",{className:e.footerMarginTop,children:Object(B.jsx)("div",{className:e.footercontainer,children:Object(B.jsx)(b.a,{className:e.footertext,variant:"subtitle",children:"mightbehuman@protonmail.com"})})})},ce=Object(m.c)({name:"progressdialog",initialState:{urlsInProgress:{}},reducers:{updateUrls:function(e,t){console.log("received update url actions"),console.log(t.payload);for(var n=Object(s.a)({},e),a=0,r=Object.entries(t.payload||{});a<r.length;a++){var c=Object(u.a)(r[a],2),i=c[0],o=c[1];console.log("Checking from action payload: "+o),"undefined"===typeof e.urlsInProgress[i]&&(console.log("added new:"+o),n.urlsInProgress=Object(s.a)(Object(s.a)({},n.urlsInProgress),{},Object(A.a)({},i,{link:o,status:"downloading"})))}for(var l=0,d=Object.entries(e.urlsInProgress);l<d.length;l++){var b=Object(u.a)(d[l],2),p=b[0],g=b[1],j=g.status,f=g.link;console.log("Checking from state: "+j+" "+f),t.payload&&"undefined"!==typeof t.payload[p]||(console.log("completed:"+f),n.urlsInProgress=Object(s.a)(Object(s.a)({},n.urlsInProgress),{},Object(A.a)({},p,Object(s.a)(Object(s.a)({},n.urlsInProgress[p]),{},{status:"completed"}))))}return n}}}),ie=ce.actions.updateUrls,se=function(e){return e.progressdialog.urlsInProgress},oe=ce.reducer,le=n(99),ue=n.n(le),de=n(204),be=n(100),pe=n.n(be),ge=n(101),je=n.n(ge);function fe(e,t){return e.length<t?e:e.substr(0,t)+"\u2026"}var me=n(201),he=n(208),xe=n(199),Oe=n(200),ve=n(98),ke=n.n(ve),ye=n(97),we=n(35),Ne=Object(C.a)((function(e){return{root:{maxWidth:"90vw",position:"fixed",bottom:"0px",right:"0px",margin:"16px"},header:{display:"flex",background:"white",borderRadius:"10px 10px 0px 0px",alignItems:"center"},headericon:{},checkmark:{marginLeft:"auto"},url:{},urlcontainer:{display:"flex",padding:e.spacing(1)+"px "+e.spacing(3)+"px",alignItems:"center"},urlcontainercompleted:{display:"flex",padding:e.spacing(1)+"px "+e.spacing(3)+"px",color:e.palette.primary.dark,alignItems:"center"},overrideaccordionshadow:{boxShadow:"none",border:"none"},urls:{marginLeft:e.spacing(2)}}}));function Ie(e){var t=Object(o.c)(se),n=Object(o.b)(),c=Ne();e.anchorEl;Object(a.useEffect)((function(){ee.ref("queue/").on("value",(function(e){var t=e.val();console.log("queue changes"),console.log(t),n({type:"QUEUE_CHANGE",payload:t})}))}),[]);var i=r.a.useState(!1),s=Object(u.a)(i,2),l=s[0],d=s[1],g=Object(we.a)();return console.log("existingurls"),window.exu=t,console.log(t),Object.values(t).length>0&&Object(B.jsx)(de.a,{borderRadius:"40px",boxShadow:3,m:0,p:2,bgcolor:"background.paper",className:c.root,children:Object(B.jsxs)(he.a,{expanded:!l,onChange:function(){d(!l)},classes:{root:c.overrideaccordionshadow},children:[Object(B.jsx)(xe.a,{expandIcon:Object(B.jsx)(ke.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",p:0,style:{padding:0},children:Object(B.jsxs)("div",{className:c.header,children:[Object(B.jsx)(ue.a,{style:{margin:"8px"},color:"primary",fontSize:"large"}),Object(B.jsxs)("div",{children:[Object(B.jsx)(b.a,{variant:"h5",gutterBottom:!1,children:"Processing queue"}),Object(B.jsxs)(b.a,{variant:"caption",children:[Object.values(t).filter((function(e){return"downloading"===e.status})).length," page saving in progress"]})]})]})}),Object(B.jsx)(Oe.a,{style:{margin:0,padding:0},children:Object(B.jsx)("div",{className:c.body,children:Object.entries(t).map((function(e){var t=Object(u.a)(e,2),n=t[0],a=t[1];return"downloading"===a.status?Object(B.jsxs)("div",{children:[Object(B.jsxs)("div",{className:c.urlcontainer,children:[Object(B.jsx)(pe.a,{fontSize:"large",color:"disabled"}),Object(B.jsxs)(b.a,{className:c.urls,children:["Saving ",fe(a.link,30)]})]}),Object(B.jsx)(p.a,{children:Object(B.jsx)(me.a,{color:"primary"})})]},n):Object(B.jsxs)("div",{className:c.urlcontainercompleted,children:[Object(B.jsx)(je.a,{fontSize:"large"}),Object(B.jsx)(b.a,{className:c.urls,children:fe(a.link,30)}),Object(B.jsx)("div",{className:c.checkmark,children:Object(B.jsx)(ye.Checkmark,{size:"medium",color:g.palette.primary.main})})]},n)}))})})]})})}var Ce=n(207),Se=n(206);function Te(e){return Object(B.jsx)(Se.a,Object(s.a)({elevation:6,variant:"filled"},e))}var Be=function(){var e=Object(o.c)(L),t=Object(o.c)(D),n=Object(o.c)(F),a=Object(o.b)(),r=function(e,t){"clickaway"!==t&&(console.log("trying to close"),a(G()))};return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(l.a,{}),Object(B.jsx)(ne,{}),Object(B.jsx)(U,{}),Object(B.jsx)(Ce.a,{open:e,autoHideDuration:1200,onClose:r,children:Object(B.jsx)(Te,{onClose:r,severity:n,children:t})}),Object(B.jsx)(Ie,{}),Object(B.jsx)(re,{})]})};function Re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}var Pe=Object(m.b)("counter/fetchCount",function(){var e=Object(f.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ue=Object(m.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}},extraReducers:function(e){e.addCase(Pe.pending,(function(e){e.status="loading"})).addCase(Pe.fulfilled,(function(e,t){e.status="idle",e.value+=t.payload}))}}),Ae=Ue.actions,Ee=(Ae.increment,Ae.decrement,Ae.incrementByAmount,Ue.reducer),Me=n(102),We=n(55),_e=j.a.mark(Le),ze=j.a.mark(De),He=j.a.mark(Fe);function Le(e){var t;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(We.c)();case 2:return t=n.sent,console.log("queue changes async curState"),console.log(t),console.log("action:"),console.log(e),n.next=9,Object(We.b)(ie(e.payload));case 9:return n.next=11,Object(We.b)(k());case 11:case"end":return n.stop()}}),_e)}function De(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(We.d)("QUEUE_CHANGE",Le);case 2:case"end":return e.stop()}}),ze)}function Fe(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(We.a)([De()]);case 2:case"end":return e.stop()}}),He)}var qe=Object(Me.a)(),Xe=Object(m.a)({reducer:{counter:Ee,submissionbar:J,archive:I,progressdialog:oe},middleware:function(e){return[].concat(Object(d.a)(e()),[qe])}});qe.run(Fe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(B.jsx)(r.a.StrictMode,{children:Object(B.jsx)(o.a,{store:Xe,children:Object(B.jsx)(Be,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[149,1,2]]]);
//# sourceMappingURL=main.6a8ea79b.chunk.js.map